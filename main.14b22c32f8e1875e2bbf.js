(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{L1EO:function(t,n,e){},QfWi:function(t,n,e){"use strict";e.r(n);e("lYjL"),e("IlJM"),e("RtS0"),e("8cZI"),e("lmye"),e("D/wG"),e("wCa+"),e("3dw1"),e("L1EO"),e("JBxO"),e("FdtR");var i="",o=function(t){return i=t},s="https://goit-phonebook-api.herokuapp.com",r=function(){return fetch(s+"/contacts",{headers:{Authorization:i}}).then((function(t){return t.json()}))},a={formSignUp:document.querySelector(".form-signup"),btnSignUp:document.querySelector(".signup"),btnLogin:document.querySelector(".login"),btnLogout:document.querySelector(".logout"),name:document.querySelector(".name"),email:document.querySelector(".email"),contactForm:document.querySelector(".form"),contactList:document.querySelector(".list"),content:document.querySelector(".content")},c=[];function u(){var t=c.map((function(t){return'<li>\n    <span class="contact-name-'+t.id+'">'+t.name+'</span>: <span class="contact-number-'+t.id+'">'+t.number+'</span>\n    <button class="delete" data-id='+t.id+'>Delete</button>\n    <button class="add" data-id='+t.id+'>Update</button>\n    <div class="update-form-wrapper" data-id='+t.id+"></div> \n    </li> "})).join("");a.contactList.innerHTML="",a.contactList.insertAdjacentHTML("beforeend",t);var n=a.contactList.querySelectorAll(".delete"),e=a.contactList.querySelectorAll(".add"),o=a.contactList.querySelectorAll(".update-form-wrapper");n.forEach((function(t){return t.addEventListener("click",d)})),e.forEach((function(t){t.addEventListener("click",(function(n){t.classList.add("is-hidden");var e=n.target.dataset.id,d=c.find((function(t){return t.id===e}));console.log("selectedContact",d),o.forEach((function(t){if(t.dataset.id===e){t.insertAdjacentHTML("beforeend",'\n        <input type="text" class="update-name" />\n        <input type="text" class="update-number" />\n        <button class="save">Save</button>\n      ');var n=t.querySelector(".update-name"),o=t.querySelector(".update-number"),l=a.contactList.querySelector(".contact-name-"+e),m=a.contactList.querySelector(".contact-number-"+e),p=t.querySelector(".save"),f={};n.addEventListener("input",(function(t){var e=n.value;l.textContent=e,f.name=l.textContent})),o.addEventListener("input",(function(t){var n=o.value;m.textContent=n,f.number=m.textContent})),p.addEventListener("click",(function(){(function(t,n){return fetch(s+"/contacts/"+t,{method:"PATCH",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:i},body:JSON.stringify(n)}).then((function(t){return t.json()})).then(console.log).catch((function(t){return console.log("error ",t)}))})(e,f).then((function(t){return Object.assign({},d,{contact:t})})).then(r).then((function(t){return c=t})).then(u)}))}}))}))}))}function d(t){var n,e=t.target.dataset.id;(n=e,fetch(s+"/contacts/"+n,{method:"delete",headers:{Authorization:i}}).then((function(t){return t.json()}))).then((function(){return c=c.filter((function(t){return t.id!==e}))})).then(u)}var l={inputName:a.formSignUp.querySelector(".input-name-signup"),btnFormSignup:a.formSignUp.querySelector(".btn-form-signup"),btnFormLogin:a.formSignUp.querySelector(".btn-form-login"),onClickBtnSignup:function(){this.inputName.classList.remove("is-hidden"),this.btnFormSignup.classList.remove("is-hidden"),a.formSignUp.classList.remove("is-hidden"),a.btnSignUp.classList.add("is-hidden"),a.btnLogin.classList.add("is-hidden")},onClickBtnLogin:function(){this.btnFormLogin.classList.remove("is-hidden"),a.formSignUp.classList.remove("is-hidden"),a.btnSignUp.classList.add("is-hidden"),a.btnLogin.classList.add("is-hidden")},onClickBtnLogout:function(){this.inputName.classList.add("is-hidden"),this.btnFormSignup.classList.add("is-hidden"),this.btnFormLogin.classList.add("is-hidden"),a.content.classList.add("is-hidden"),a.formSignUp.classList.add("is-hidden"),a.btnSignUp.classList.remove("is-hidden"),a.btnLogin.classList.remove("is-hidden")}};function m(t){t.preventDefault();var n,e=t.target.elements.name_signup.value,r=t.target.elements.email_signup.value,c=t.target.elements.psw_signup.value;(n={name:e,email:r,password:c},fetch(s+"/users/signup",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(t){return t.json()})).then((function(t){return o(i),t}))).then((function(t){var n=t.user;a.name.textContent=n.name,a.email.textContent=n.email,a.formSignUp.classList.add("is-hidden"),a.content.classList.remove("is-hidden"),a.formSignUp.reset()}))}function p(t){t.preventDefault();var n,e=t.target.elements.email_signup.value,i=t.target.elements.psw_signup.value;(n={email:e,password:i},fetch(s+"/users/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(t){return t.json()})).then((function(t){return o(t.token),t}))).then((function(t){var n=t.user;a.name.textContent=n.name,a.email.textContent=n.email,a.formSignUp.classList.add("is-hidden"),a.content.classList.remove("is-hidden"),a.formSignUp.reset()})).then(r).then((function(t){return c=t})).then(u)}a.btnSignUp.addEventListener("click",(function(){l.onClickBtnSignup(),a.formSignUp.addEventListener("submit",m)})),a.btnLogin.addEventListener("click",(function(){l.onClickBtnLogin(),a.formSignUp.addEventListener("submit",p)})),a.btnLogout.addEventListener("click",(function(){fetch(s+"/users/logout",{method:"post",headers:{"Content-Type":"application/json",Authorization:i}}).then((function(t){return t.json()})).then((function(t){"Please authenticate"===t.message&&alert("Пожалуйста, войдите или зарегестрируйтесь"),a.name.textContent="",a.email.textContent="",l.onClickBtnLogout(),a.formSignUp.removeEventListener("submit",m),a.formSignUp.removeEventListener("submit",p)}))})),a.contactForm.addEventListener("submit",(function(t){t.preventDefault();var n=t.target.elements.name.value,e=t.target.elements.number.value;(function(t){var n=t.name,e=t.number;return fetch(s+"/contacts",{method:"post",headers:{"Content-Type":"application/json",Authorization:i},body:JSON.stringify({name:n,number:e})}).then((function(t){return t.json()}))})({name:n,number:e}).then((function(t){return c.push(t)})).then(u).then((function(){a.contactForm.reset()}))}))}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.14b22c32f8e1875e2bbf.js.map