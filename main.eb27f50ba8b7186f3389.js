(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{L1EO:function(t,e,n){},QfWi:function(t,e,n){"use strict";n.r(e);n("lYjL"),n("IlJM"),n("RtS0"),n("8cZI"),n("lmye"),n("D/wG"),n("wCa+"),n("3dw1"),n("L1EO"),n("JBxO"),n("FdtR"),n("wcNg");var r=n("czhI"),a=n.n(r);function i(t,e,n,r,a,i,o){try{var c=t[i](o),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function c(t){i(o,r,a,c,s,"next",t)}function s(t){i(o,r,a,c,s,"throw",t)}c(void 0)}))}}a.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var c=function(t){a.a.defaults.headers.common.Authorization=t},s=function(){var t=o(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.a.post("/users/signup",e);case 3:return n=t.sent,t.next=6,n.data;case 6:return r=t.sent,c(r.token),t.abrupt("return",r);case 11:throw t.prev=11,t.t0=t.catch(0),t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),u=function(){var t=o(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.a.post("/users/login",e);case 3:return n=t.sent,t.next=6,n.data;case 6:return r=t.sent,c(r.token),t.abrupt("return",r);case 11:throw t.prev=11,t.t0=t.catch(0),t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=o(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.a.post("/users/logout");case 3:return e=t.sent,t.abrupt("return",e);case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),l=function(){var t=o(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.a.post("/contacts",e);case 3:return n=t.sent,t.next=6,n.data;case 6:return r=t.sent,t.abrupt("return",r);case 10:throw t.prev=10,t.t0=t.catch(0),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=o(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.a.get("/contacts");case 3:return e=t.sent,t.next=6,e.data;case 6:return n=t.sent,t.abrupt("return",n);case 10:throw t.prev=10,t.t0=t.catch(0),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),m=function(){var t=o(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.a.delete("/contacts/"+e);case 3:return n=t.sent,t.abrupt("return",n);case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=o(regeneratorRuntime.mark((function t(e,n){var r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.a.patch("/contacts/"+e,n);case 3:return r=t.sent,t.next=6,r.data;case 6:return i=t.sent,t.abrupt("return",i);case 10:throw t.prev=10,t.t0=t.catch(0),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}(),v={formSignUp:document.querySelector(".form-signup"),btnSignUp:document.querySelector(".signup"),btnLogin:document.querySelector(".login"),btnLogout:document.querySelector(".logout"),name:document.querySelector(".name"),email:document.querySelector(".email"),contactForm:document.querySelector(".form"),contactList:document.querySelector(".list"),content:document.querySelector(".content")},h={inputName:v.formSignUp.querySelector(".input-name-signup"),btnFormSignup:v.formSignUp.querySelector(".btn-form-signup"),btnFormLogin:v.formSignUp.querySelector(".btn-form-login"),onClickBtnSignup:function(){this.inputName.classList.remove("is-hidden"),this.btnFormSignup.classList.remove("is-hidden"),v.formSignUp.classList.remove("is-hidden"),v.btnSignUp.classList.add("is-hidden"),v.btnLogin.classList.add("is-hidden")},onClickBtnLogin:function(){this.btnFormLogin.classList.remove("is-hidden"),v.formSignUp.classList.remove("is-hidden"),v.btnSignUp.classList.add("is-hidden"),v.btnLogin.classList.add("is-hidden")},onClickBtnLogout:function(){this.inputName.classList.add("is-hidden"),this.btnFormSignup.classList.add("is-hidden"),this.btnFormLogin.classList.add("is-hidden"),v.content.classList.add("is-hidden"),v.formSignUp.classList.add("is-hidden"),v.btnSignUp.classList.remove("is-hidden"),v.btnLogin.classList.remove("is-hidden")}},g=[];function L(){var t=g.map((function(t){return'<li>\n    <span class="contact-name-'+t.id+'">'+t.name+'</span>: <span class="contact-number-'+t.id+'">'+t.number+'</span>\n    <button class="delete" data-id='+t.id+'>Delete</button>\n    <button class="add" data-id='+t.id+'>Update</button>\n    <div class="update-form-wrapper" data-id='+t.id+"></div> \n    </li> "})).join("");v.contactList.innerHTML="",v.contactList.insertAdjacentHTML("beforeend",t);var e=v.contactList.querySelectorAll(".delete"),n=v.contactList.querySelectorAll(".add"),r=v.contactList.querySelectorAll(".update-form-wrapper");e.forEach((function(t){return t.addEventListener("click",x)})),n.forEach((function(t){t.addEventListener("click",(function(e){t.classList.add("is-hidden");var n=e.target.dataset.id,a=g.find((function(t){return t.id===n}));console.log("selectedContact",a),r.forEach((function(t){if(t.dataset.id===n){t.insertAdjacentHTML("beforeend",'\n        <input type="text" class="update-name" />\n        <input type="text" class="update-number" />\n        <button class="save">Save</button>\n      ');var e=t.querySelector(".update-name"),r=t.querySelector(".update-number"),i=v.contactList.querySelector(".contact-name-"+n),o=v.contactList.querySelector(".contact-number-"+n),c=t.querySelector(".save"),s={};e.addEventListener("input",(function(t){var n=e.value;i.textContent=n,s.name=i.textContent})),r.addEventListener("input",(function(t){var e=r.value;o.textContent=e,s.number=o.textContent})),c.addEventListener("click",(function(){f(n,s).then((function(t){return Object.assign({},a,{contact:t})})).then(p).then((function(t){return g=t})).then(L).catch((function(t){return console.log(t)}))}))}}))}))}))}function b(t){t.preventDefault();var e={name:t.target.elements.name_signup.value,email:t.target.elements.email_signup.value,password:t.target.elements.psw_signup.value};s(e).then((function(t){var e=t.user;v.name.textContent=e.name,v.email.textContent=e.email,v.formSignUp.classList.add("is-hidden"),v.content.classList.remove("is-hidden"),v.formSignUp.reset()})).then(w(e)).catch((function(t){return console.log(t)}))}function S(t){t.preventDefault(),w({email:t.target.elements.email_signup.value,password:t.target.elements.psw_signup.value})}function w(t){u(t).then((function(t){var e=t.user;v.name.textContent=e.name,v.email.textContent=e.email,v.formSignUp.classList.add("is-hidden"),v.content.classList.remove("is-hidden"),v.formSignUp.reset()})).then(p).then((function(t){return g=t})).then(L).catch((function(t){return console.log(t)}))}function x(t){var e=t.target.dataset.id;m(e).then((function(){return g=g.filter((function(t){return t.id!==e}))})).then(L).catch((function(t){return console.log(t)}))}v.btnSignUp.addEventListener("click",(function(){h.onClickBtnSignup(),v.formSignUp.addEventListener("submit",b)})),v.btnLogin.addEventListener("click",(function(){h.onClickBtnLogin(),v.formSignUp.addEventListener("submit",S)})),v.btnLogout.addEventListener("click",(function(){d().then((function(t){"Please authenticate"===t.message&&alert("Пожалуйста, войдите или зарегестрируйтесь"),v.name.textContent="",v.email.textContent="",v.contactList.innerHTML="",h.onClickBtnLogout(),v.formSignUp.removeEventListener("submit",b),v.formSignUp.removeEventListener("submit",S)})).catch((function(t){return console.log(t)}))})),v.contactForm.addEventListener("submit",(function(t){t.preventDefault();var e=t.target.elements.name.value,n=t.target.elements.number.value;l({name:e,number:n}).then((function(t){return g.push(t)})).then(L).then((function(){v.contactForm.reset()})).catch((function(t){return console.log(t)}))}))}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.eb27f50ba8b7186f3389.js.map